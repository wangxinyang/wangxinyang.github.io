<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>elasticsearchについて</title>
      <link href="/2020/07/22/elasticsearch%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6/elasticsearch%E7%AC%AC%E4%B8%80%E5%BC%BE/"/>
      <url>/2020/07/22/elasticsearch%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6/elasticsearch%E7%AC%AC%E4%B8%80%E5%BC%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="Elasticsearch立上げ際に注意すべき点"><a href="#Elasticsearch立上げ際に注意すべき点" class="headerlink" title="Elasticsearch立上げ際に注意すべき点"></a>Elasticsearch立上げ際に注意すべき点</h1><ul><li><p><strong>JDKが必要です</strong>。</p></li><li><p><strong>ルートユーザーはElasticsearchを立ち上げることが支持しません。普通ユーザーを増加しないといけない。</strong></p></li></ul><pre class=" language-line-numbers language-shell"><code class="language-line-numbers language-shell">// 新しいグループを作る 名前はお好きにしてくださいgroupadd es// 新しいユーザーを作る 「-g」はこのユーザーはなんのグループに所属することuseradd es -g es // パスワードを設定するpasswd es</code></pre><ul><li><strong>リモート訪問できるように設定すること<br>Elasticsearchのconfigフォルダーのelasticsearch.ymlを修正する</strong></li></ul><pre class=" language-line-numbers language-shell"><code class="language-line-numbers language-shell">cd /インストールされたフォルダー/elasticsearch-6.8.0/configvi elasticsearch.yml// 0.0.0.0に設定すればいいですnetwork.host: 0.0.0.0</code></pre><ul><li><strong>立上げ際にERRORになってしまって</strong></li></ul><pre class=" language-line-numbers language-shell"><code class="language-line-numbers language-shell">[1]: max file descriptors [4096] for elasticsearch process is too low,increase to at least [65535]// ルートユーザーを切替、limits.confを修正するvi /etc/security/limits.conf *  soft nproc 4096 *  soft nofile 655356 *  hard nproc 4096 *  hard nofile 655356// 修正完成した後、再登録が必要ですulimit -Hnulimit -Snulimit -Huulimit -Su// 上記のコマンドは修正成功するかどうかが確認できます</code></pre><pre class=" language-line-numbers language-shell"><code class="language-line-numbers language-shell">[2]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]vi /etc/sysctl.confvm.max_map_count=655360 //増加しますsysctl -p //コマンドは修正成功するかどうかが確認できます</code></pre><pre class=" language-line-numbers language-shell"><code class="language-line-numbers language-shell">[3]: max number of threads [1024] for user [leyou] is too low, increase to at least [4096]vi /etc/security/limits.d/20-nproc.conf//星マークは自分のESのユーザーなに修正するようにしてください* 　soft    nproc     4096</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> ElasticSearch </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
